From 8897273205decc8013c00e724a877300a34922ff Mon Sep 17 00:00:00 2001
From: Vasilij Schneidermann <mail@vasilij.de>
Date: Wed, 15 Aug 2018 09:11:23 +0200
Subject: [PATCH] C5 compatibility

---
 spiffy-uri-match.meta  |  8 --------
 spiffy-uri-match.scm   | 10 +++++++---
 spiffy-uri-match.setup |  7 -------
 3 files changed, 7 insertions(+), 18 deletions(-)
 delete mode 100644 spiffy-uri-match.meta
 delete mode 100644 spiffy-uri-match.setup

diff --git a/spiffy-uri-match.meta b/spiffy-uri-match.meta
deleted file mode 100644
index 274c83a..0000000
--- a/spiffy-uri-match.meta
+++ /dev/null
@@ -1,8 +0,0 @@
-((egg "spiffy-uri-match.egg")
- (synopsis "uri-match integration for spiffy")
- (doc-from-wiki)
- (depends uri-match spiffy uri-common intarweb)
- (author "Moritz Heidkamp")
- (category web)
- (license "BSD")
- (files "spiffy-uri-match.scm" "spiffy-uri-match.meta" "spiffy-uri-match.release-info" "spiffy-uri-match.setup"))
\ No newline at end of file
diff --git a/spiffy-uri-match.scm b/spiffy-uri-match.scm
index ba72a30..2def5e9 100644
--- a/spiffy-uri-match.scm
+++ b/spiffy-uri-match.scm
@@ -2,8 +2,12 @@
 
 (redirect-to default-response-headers uri-match/spiffy)
 
-(import chicken scheme)
-(use uri-match spiffy uri-common intarweb)
+(import scheme)
+(import (chicken base))
+(import uri-match)
+(import spiffy)
+(import uri-common)
+(import intarweb)
 
 (define (redirect-to location #!key (code 302) (headers '()))
   (let* ((current-uri (request-uri (current-request)))
@@ -36,4 +40,4 @@
 	      (lambda () (or (handler) (continue))))
 	    (continue))))))
 
-)
\ No newline at end of file
+)
diff --git a/spiffy-uri-match.setup b/spiffy-uri-match.setup
deleted file mode 100644
index fc15e8b..0000000
--- a/spiffy-uri-match.setup
+++ /dev/null
@@ -1,7 +0,0 @@
-(compile -s -O2 spiffy-uri-match.scm -J)
-(compile -s -O2 spiffy-uri-match.import.scm)
-
-(install-extension
- 'spiffy-uri-match
- '("spiffy-uri-match.so" "spiffy-uri-match.import.so")
- `((version "0.3")))
-- 
2.18.0

